# Cursor 프로젝트 진행 순서 

## 1. 마스터 작업 순서 확인
* **cursor-master-sequence.md 파일** 확인(@/vibe-coding/)

## 2. 프로젝트 기초 준비
* 프로젝트명 기준 폴더 생성 -> 하부 디렉토리 /docs 생성 -> /docs에 PRD 파일 넣기

## 3. 프로젝트 계획 세우기 (이후는 커서 에이전트 창에서 진행)
* PRD 기반으로 한 프로젝트 플래닝을 플랜모드에서 요청
* 커서가 질문을 하는 경우, 이에 대한 답변을 통해 구체화된 내용 반영을 요청
* **필수 패키지**: poetry.lock 및 pyproject.toml로 확인 요청
* **참고 코드 스니펫**: TODOs.md에 반영할 것을 요청 
* 커서가 작성한 플랜은 **/TODOs.md 파일**로 작성을 요청. 1차 작성후 한번더 정제 요청

## 4. 프로젝트 지침 및 컨텍스트 준비
* **AGENTS.md**:  파일 복사 붙이기 (@/vibe-coding/) 파워쉘 명령어. 환경변수 관리. 
* **Cursor rule**: PRD와 TODOs.md를 바탕으로 커서룰 작성을 요청 (명령어: @.cursor/rules)
* **api-contract**:API-Contract의 sync는 매우 중요. 파일 복사한 후(@vibe-coding) 본 프로젝트에 맞게 각색하여 커서룰로 넣기 
* **LLM 구조 output**: llm 사용시 구조화된 output을 쓰면 반드시 contract 정합성 점검
* **캐시저장**: 파싱이나, LLM 호출 결과를 재사용위해 반드시 한번 호출한 결과는 캐싱 => **반드시 커서룰**
* **test세션**: backend-frontend가 별도로 구성된 경우, backend에서 E2E 테스트가 완료되어야 합니다. 이를 위해 각 단계별 sub 테스트가 정합성있게 빠짐없이 되어 있는지 TODOs.md에 반영. **AGNETS.md에서 테스트 관련내용 숙지할 것을 요청**
* **Sub Phase 완료 조건**: TODOs.md 업데이트 및 깃 커밋 반드시 실시
* **supabase**: connection string 확인. transaction pooler에서 ipv4 버전 string 확인

## 5. 프로젝트 작업 개시(주의사항)
* **가장 중요: AGENTS.md와 커서룰이 항상 적용되도록 리마인드 할것. 이것을 기억**
* **실제 데이터**: 테스트시 Mock이 아닌 실제 데이터로 E2E 테스트
* **Supabase 연동**: Phase 마다 supabase와 연동되어 처리 되도록 작성되어야 함. 테스트도 동일하게 진행
* **데이터 Coverage 조기 확인**: 여러 Phase로 나눠진 경우, 첫 Phase에서 가능한 모든 데이터 수집경로(소스, 카테고리등)에 대해서 실행시 문제없는것 확인해야 함.
* **Phase별 점검**: TEST 이전에 이번 Phase내 생성한 파일들이 정합성에 문제가 없는지, 그리고 TEST 파일들이 Phase내 생성한 파일에서 함수 및 변수를 적정하게 재사용하는지, 그리고 호출하는 순서가 올바른지 확인
* **파워쉘 명령어**: 모듈로 실행도 자주 까먹음. 리마인드 시킬 것
* **TEST**: 커서룰의 백엔드 내용 반영 확인. 테스트는 문제 원인 파악도 중요하므로 로그를 최대한 보강. 로그는 터미널 출력만이 아니라, 파일로도 남겨서 테스트 종료후 언제든지 피드백가능하게 함
* **TEST 재실행 금지**: 커서가 Test 종료후 설명없이 바로 재 test하는 경우가 많음. 반드시 로그 분석하여 원인 및 개선책 설명한후, 사용자 동의하에 재 테스트
* **검증 스크립트**: Test 결과를 검증을 위해 로그를 추가하고, 이를 실행완료후 검증 및 분석하는 스크립트 작성을 사전에 작성할 것을 요청(test 파일과 별도)
* **README**: README.md를 작성후 프로젝트 구조가 지속적으로 변경되므로, 이를 반영한 업데이트 필수
* **이모지**:테스트 파일에서는 절대 이모지 사용하면 인코딩 에러. AGENTS.md에 기록해도 계속 잊어먹으니 강조할 것
* **테스트 에러 별도 기록**:별도 기록 마크다운 파일 만들어서 지속적으로 누적시킬 것
* **indent 에러관련 에디팅체커**: indentation 에러가 빈발할 수 있으므로, eslintrc 및 prettierrc를 반드시 사용
* **코드 마이그레이션**: 너무 웃긴게, 테스트 파일에서 힘들게 만든 로직을, 마지막에 일괄 처리 스크립트 만들때는 자기 마음대로 새로 만듬 -> **이것이 커서의 본질. 어디까지는 잘하는데 어디까지는 갑자기 잘못함. 그 구분이 힘듬** 


## 6. 프로젝트 배포
### 6.0. DB
* **SQLite**:테스트 fixture에서 connection을 명시적으로 유지하고, session은 Session(bind=db_connection)로 동일 connection을 사용하도록 설정하세요.
또는 tmp_path fixture를 사용해 각 테스트마다 임시 파일 기반 SQLite를 사용하면 connection lifecycle 문제를 피할 수 있습니다.

### 6.1. 백엔드(Railway)
* **기본설정**: 도커에서 실행루트 및 실행명령(uvicorn) 인식문제 없게 할것. 커서룰에 반영 완료
* **환경변수**: supabase URL을 .env에서 잘 확인해서 설정할 것. **CORS는 프론트앱 배포후 다시 재설정 잘 확인할 것**
* **건강도**: url주소/health 로 확인하기
* **스케쥴러**: create로 추가할 것. command 입력. variable 다시 추가 

### 6.2. 프론트엔드(Vercel)
* **기본설정**: Vercel에서 실행루트 인식문제 없게 할것. 커서룰에 반영 완료
* **루트디렉토리**: frontend로 설정
* **환경변수**: NEXT_PUBLIC_API_URL => Railway에서 url확인해서 붙여넣기. **이때 https:// 반드시 붙일것**
* **기능확인**: 모든 기능확인후 문제 발견후 피드백 필요

## 7. 주의 사항
* **디버깅시**: 에러가 지속되면 반드시 로그를 추가해서 원인을 차차 좁혀가는 approach
* **gitignore**: **원하지 않는 파일을 포함하는 경우에 주의해야!!!** (lib의 경우 Python에서는 gitignore에 들어가나, 프론트에서는 들어가면 큰일남!!)
* **run build**: 배포 이전에 개발모드에서 run dev이외에 run build로 확인해서 타입에러 문제등을 반드시 걸러낼 것
* **로그 추가 요청시 프롬프트**: 한번더 시나리오 정합성 확인
코드의 가능한 모든 줄에 로그를 출력하도록 보강했습니다.
​로그 출력을 통해서 어떻게 원인을 찾을지 시나리오 베이스로 검토하세요
그리고 sequential_thiniking mcp를 돌려서 확인하세요
mcp가 작동이 안되면 바로 저에게 이야기 하세요
모든 체크를 완벽하게 했는지 다시 한번 확인하고 , 체크 리스트를 저에게 보여주세요
그 결과를 내가 하나하나 보고 다시 피드백할때까지 아무것도 실행하지 마세요
먼저 이해했는지만 답변하세요
실행 금지